<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tic Tac Toe</title>
    <style>
        body {
            margin-left: 40px;
        }

        p {
            margin-left: 10px;
        }
        button{
            background: #fcfcfc;
            height: 27px;
            color: #891100;
        }

    </style>
</head>
<body>
<h3>Tic Tac Toe</h3>
<p id="table"></p>
<button onclick="play()">Bắt đầu</button>
<script>
    let board = [];
    let i;
    let j;
    let data = "";
    let winO = false;
    let winX = false;
    let player1 = false;

    for (i = 0; i < 8; i++) {
        board[i] = new Array(". .",". .", ". .", ". .", ". .", ". .",". .", ". .");
    }

    function table() {
        data += "<table>";
        for (i = 0; i < 8; i++) {
            data += "<tr>"
            for (j = 0; j < 8; j++) {
                data += "<td><button id='" + "button" + i + j + "' onclick='play(this.value)' value='" + i + j + "'>" + board[i][j] + "</button></td>";
            }
            data += "</tr>"
        }
        data += "</table>"
        document.getElementById("table").innerHTML = ("" + data);
    }

    table();

    function play(position) {
        if (player1) {
            board[position[0]][position[1]] = "O";
            document.getElementById("button" + position).innerHTML = "O";
            player1 = false;
        } else {
            board[position[0]][position[1]] = "X";
            document.getElementById("button" + position).innerHTML = "X";
            player1 = true;
        }
        for (i = 0; i < 4; i++) {
            for (j = 0; j < 4; j++) {
                if (board[i][j] === "O" && board[i][j + 1] === "O" && board[i][j + 2] === "O" && board[i][j + 3] === "O") {
                    console.log(winO);
                    winO = true;
                }
                if (board[i][j] === "X" && board[i][j + 1] === "X" && board[i][j + 2] === "X" && board[i][j + 3] === "X") {
                    winX = true;
                }
            }
        }
        for (i = 0; i < 4; i++) {
            for (j = 0; j < 4; j++) {
                if (board[i][j] === "O" && board[i][j + 1] === "O" && board[i][j + 2] === "O" && board[i][j + 3] === "O") {
                    console.log(winO);
                    winO = true;
                }
                if (board[i][j] === "X" && board[i][j + 1] === "X" && board[i][j + 2] === "X" && board[i][j + 3] === "X") {
                    winX = true;
                }
            }
        }
        for (i = 0; i < 5; i++) {
            for (j = 0; j < 5; j++) {
                if (board[i][j] === "O" && board[i+1][j+1] === "O" && board[i+2][j+2] === "O" && board[i+3][j+3] === "O") {
                    winO = true;
                }
                if (board[i][j] === "X" && board[i+1][j+1] === "X" && board[i+2][j+2] === "X" && board[i+3][j+3] === "X") {
                    winX = true;
                }
            }
        }
        for (i = 3; i < 8; i++) {
            for (j = 0; j < 5; j++) {
                if (board[i][j] === "O" && board[i-1][j+1] === "O" && board[i-2][j+2] === "O" && board[i-3][j+3] === "O") {
                    winO = true;
                }
                if (board[i][j] === "X" && board[i-1][j+1] === "X" && board[i-2][j+2] === "X" && board[i-3][j+3] === "X") {
                    winX = true;
                }
            }
        }

        for (j = 0; j < 4; j++) {
            for (i = 0; i < 4; i++) {
                if (board[i][j] === "O" && board[i + 1][j] === "O" && board[i + 2][j] === "O" && board[i + 3][j] === "O") {
                    winO = true;
                }
                if (board[i][j] === "X" && board[i + 1][j] === "X" && board[i + 2][j] === "X" && board[i + 3][j] === "X") {
                    winX = true;
                }
            }
        }
        if (winO === true) {
            alert("Nguoi choi 0 chien thang");
            for (i = 0; i < 8; i++) {
                for (j = 0; j < 8; j++) {
                    board[i][j] = ". .";
                    document.getElementById("button" + i + j).innerHTML = ". .";
                }
            }
            winO = false;
        }
        if (winX === true) {
            alert("Nguoi choi X chien thang");
            for (i = 0; i < 8; i++) {
                for (j = 0; j < 8; j++) {
                    board[i][j] = ". .";
                    document.getElementById("button" + i + j).innerHTML = ". .";
                }
            }
            winX = false;
        }
    }
</script>
</body>
</html>